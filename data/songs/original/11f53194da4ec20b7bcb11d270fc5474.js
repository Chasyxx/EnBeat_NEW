i=32768<<3, // Change this value to change the speed of the effect
x=t/i+1.98,
t=i*(0.665*x - 1.518*sin(x) - 0.0853157*sin(3*x) - 0.08019268*sin(5*x) + 0.0000832653*sin(7*x) - 0.000824691*sin(9*x) + 0.00615868*sin(11*x) + 0.00150248*sin(13*x) + 0.000865207*sin(15*x))*(0.5/0.665),

C=t=>(t-=(1<<13),t+16384>>15&t>>13&t>>14&1?128*atan(sin(t/16)+sin(t/9))/1.0008**(t&4095):0),
S=(q,a)=>int(q)?.98*t*2**(q/12)&a:0,
m1=`0x${"9070907090220200907090709022020060706070609909004070707040990900"[t>>12&63]}`,
m2=`0x${"D0B0D0B0D0660600D0B0D0B0D066060090B090B090DD0D0090B0B0B090DD0D00"[t>>12&63]}`,
b=[[-10,-15],[-3,-8]][(t>>13)-5>>4&1][(t>>13)-5>>1&1],
a=[[2,6,9],[1,4,9]][(t>>13)-5>>4&1][(t*3>>12)%3],
N=[32,24,64,48][2^t>>12&3]*random()*0.9994**(t&4095),
L=q=>max(0,min(q,255)),
[L((S(m1,255)+S(m2,192))/4
+(S(b,128)+S(b-12,128))/2*.99985**(t-(5<<13)&16383)
+S(a+12,~t>>6&255)/2*.9999**(t-(5<<13)-8191&32767)+N+C(t)/3),
L((560-S(m1,192)-S(m2,255))/4
+(S(b,128)+S(b-12,128))/2*.99985**(t-(5<<13)&16383)
+S(a+12,~t>>6&255)/2*.9999**(t-(5<<13)+8191&32767)-N-C(t)/3)]